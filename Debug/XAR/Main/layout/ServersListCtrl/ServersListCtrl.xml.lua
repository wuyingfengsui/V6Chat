function OnBind(self)	local attr = self:GetAttribute()	attr.top = 0endfunction OnInitControl(self)	local attr = self:GetAttribute()	local server_name = self:GetControlObject("server_name")	local introduction = self:GetControlObject("introduction")	local domain = self:GetControlObject("domain")	local cstate = self:GetControlObject("state")	server_name:SetText(attr.server_name)	introduction:SetText(attr.introduction)	domain:SetText(attr.domain)	if attr.state == 1 then		cstate:SetText("已连接")	else		cstate:SetText("未连接")	endendfunction SetSel(self,value)	local bkg = self:GetControlObject("background")	local changeServer_button = self:GetControlObject("changeServer_button")	if not bkg then return end	if value then		bkg:SetResID("texture.tasklist.select_item.bk")		changeServer_button:SetVisible(true)		changeServer_button:SetChildrenVisible(true)	else		bkg:SetResID("texture.tasklist.item.bk")		changeServer_button:SetVisible(false)		changeServer_button:SetChildrenVisible(false)	endendfunction List_GetSel(self)	local attr = self:GetAttribute()	return attr.selitemendfunction List_SetSel(self,item)	local attr = self:GetAttribute()	if attr.selitem then		attr.selitem:SetSel(false)	end	attr.selitem = item	item:SetSel(true)	self:FireExtEvent("OnSelectChanged")endfunction OnLButtonDown(self)	local list = self:GetOwnerControl()	list:SetSel(self)	local attr = self:GetAttribute()	list:FireExtEvent("OnSelected", attr.id)endfunction InsertItem(self,id,server_name,introduction,domain,state) --先进行查找，如找到就修改，未找到再添加	local content = self:GetControlObject("content")	local cnt = content:GetChildCount()		for i=0,cnt-1 do		local item = content:GetChildByIndex(i)		local attr = item:GetAttribute()		if attr and attr.id == id then						attr.server_name = server_name			attr.introduction = introduction			attr.domain = domain			attr.state = state						local server_name = item:GetControlObject("server_name")			local introduction = item:GetControlObject("introduction")			local domain = item:GetControlObject("domain")			local cstate = item:GetControlObject("state")			server_name:SetText(attr.server_name)			introduction:SetText(attr.introduction)			domain:SetText(attr.domain)			if attr.state == 1 then				cstate:SetText("已连接")			else				cstate:SetText("未连接")			end			return		end	end		local objFactory = XLGetObject("Xunlei.UIEngine.ObjectFactory")	local obj = objFactory:CreateUIObject("listitem."..cnt, "ServersListItem")	local attr = obj:GetAttribute()	attr.id = id	attr.server_name = server_name	attr.introduction = introduction	attr.domain = domain	attr.state = state	content:AddChild(obj)	local left,top,right,bottom = content:GetObjPos()	obj:SetObjPos(0, cnt*30, right-left,cnt*30+30)endfunction ChangeItemState(self,id,state)    local content = self:GetControlObject("content")	local cnt = content:GetChildCount()-1	for i=0,cnt do		local item = content:GetChildByIndex(i)		local attr = item:GetAttribute()		if attr and attr.id == id then						attr.state = state			local cstate = item:GetControlObject("state")			if state == 1 then				cstate:SetText("已连接")			else				cstate:SetText("未连接")			end		end	endendfunction changeServer_btn_OnClick(self)	local control = self:GetOwnerControl()	local attr = control:GetAttribute()	control:GetOwnerControl():FireExtEvent("OnChanged", attr.id)endfunction SetAdjust(self)	local attr = self:GetAttribute()	local top1 = attr.top	local content = self:GetControlObject("content")	local left,top,right,bottom = content:GetObjPos()	local cnt = content:GetChildCount()-1	for i=0,cnt do		local item = content:GetChildByIndex(i)		item:SetObjPos(0, top1, right-left,top1+30)		top1 = top1 + 30	endendfunction DeleteItem(self,id)	local content = self:GetControlObject("content")	for i=content:GetChildCount()-1,0,-1 do		local itemattr = content:GetChildByIndex(i):GetAttribute()		if itemattr.id == id then		    content:RemoveChild(content:GetChildByIndex(i))			self:UpdateScroll()		end	endendfunction DeleteAllItems(self)	local content = self:GetControlObject("content")	for i=content:GetChildCount()-1,0,-1 do		content:RemoveChild(content:GetChildByIndex(i))	end		self:UpdateScroll()endfunction OnLButtonDbClick(self)    local control = self:GetOwnerControl()	local attr = self:GetAttribute()	control:FireExtEvent("OnSelected", attr.id)endfunction MouseWheel(self, distance)	local content = self:GetControlObject("content")	local left,top,right,bottom = content:GetObjPos()	local height = bottom - top	local attr = self:GetAttribute()	local top1 = attr.top	if distance > 0 then		top1 = top1 + 30	elseif distance < 0 then		top1 = top1 - 30	end	local cnt = content:GetChildCount()	if height - (cnt*30 + top1) < 0 then		attr.top = top1	else		attr.top = height - (cnt*30 + top1) + attr.top - 30			end	if attr.top > 0 then attr.top = 0 end	self:SetAdjust()	local vscroll = self:GetControlObject("vscroll")	vscroll:SetScrollPos(-attr.top, true)endfunction OnMouseWheel(self, x, y, distance)	self:GetOwnerControl():MouseWheel(distance)endfunction OnMouseWheel_Item(self, x, y, distance)	self:GetOwnerControl():MouseWheel(distance)endfunction UpdateScroll(self)	local content = self:GetControlObject("content")	local left,top,right,bottom = content:GetObjPos()	local height = bottom - top	local vscroll = self:GetControlObject("vscroll")	vscroll:SetPageSize(height)	local cnt = content:GetChildCount()	local range = cnt*30 - height	if range < 0 then		vscroll:SetVisible(false)		vscroll:SetChildrenVisible(false)		range = 0	else		vscroll:SetVisible(true)		vscroll:SetChildrenVisible(true)	end	vscroll:SetScrollRange(0, range)	vscroll:SetScrollPos(0, true)endfunction List_OnInitControl(self)	endfunction OnVScroll(self, fun, type, newpos)	local owner = self:GetOwnerControl()	local attr = owner:GetAttribute()	if type == 4 then		attr.top = -newpos		owner:SetAdjust()	endendfunction OnPosChange(self)	local content = self:GetControlObject("content")	local left,top,right,bottom = content:GetObjPos()	local height = bottom - top	local attr = self:GetAttribute()	local cnt = content:GetChildCount()	if height >= cnt*30 then attr.top = 0 self:SetAdjust() end	self:UpdateScroll()endfunction OnScrollBarMouseWheel(self,func,x,y,distance)	self:GetOwnerControl():MouseWheel(distance)end