function OnBind(self)	local attr = self:GetAttribute()	attr.top = 0endfunction OnInitControl(self)	local attr = self:GetAttribute()	local file_name = self:GetControlObject("file_name")	local upload_speed = self:GetControlObject("upload_speed")	local share_time = self:GetControlObject("share_time")	file_name:SetText(attr.file_name)	upload_speed:SetText(attr.upload_speed)	share_time:SetText(attr.share_time)endfunction SetSel(self,value)	local bkg = self:GetControlObject("background")	if not bkg then return end	if value then		bkg:SetResID("texture.tasklist.select_item.bk")	else		bkg:SetResID("texture.tasklist.item.bk")		endendfunction List_GetSel(self)	local attr = self:GetAttribute()	return attr.selitemendfunction List_SetSel(self,item)	local attr = self:GetAttribute()	if attr.selitem then		attr.selitem:SetSel(false)	end	attr.selitem = item	item:SetSel(true)	self:FireExtEvent("OnSelectChanged")endfunction OnLButtonDown(self)	endfunction InsertItem(self,id,file_name,upload_speed,share_time)	local content = self:GetControlObject("content")	local cnt = content:GetChildCount()	local objFactory = XLGetObject("Xunlei.UIEngine.ObjectFactory")	local obj = objFactory:CreateUIObject("listitem."..cnt, "ShareFilesListItem")	local attr = obj:GetAttribute()	attr.id = id	attr.file_name = file_name	attr.upload_speed = "上传速度:" .. upload_speed	attr.share_time = "分享次数:" .. share_time	content:AddChild(obj)	local left,top,right,bottom = content:GetObjPos()	obj:SetObjPos(0, cnt*50, right-left,cnt*50+50)endfunction ChangeItemSpeed(self,id,upload_speed)    local content = self:GetControlObject("content")	local cnt = content:GetChildCount()-1	for i=0,cnt do		local item = content:GetChildByIndex(i)		local attr = item:GetAttribute()		if attr and attr.id == id then		    local upload_speed_item = item:GetControlObject("upload_speed")			upload_speed_item:SetText("上传速度:" .. upload_speed)		end	endendfunction SetAdjust(self)	local attr = self:GetAttribute()	local top1 = attr.top	local content = self:GetControlObject("content")	local left,top,right,bottom = content:GetObjPos()	local cnt = content:GetChildCount()-1	for i=0,cnt do		local item = content:GetChildByIndex(i)		item:SetObjPos(0, top1, right-left,top1+50)		top1 = top1 + 50	endendfunction DeleteItem(self,id)	local content = self:GetControlObject("content")	for i=content:GetChildCount()-1,0,-1 do		local itemattr = content:GetChildByIndex(i):GetAttribute()		if itemattr.id == id then		    content:RemoveChild(content:GetChildByIndex(i))		end	endendfunction DeleteAllItems(self)	local content = self:GetControlObject("content")	for i=content:GetChildCount()-1,0,-1 do		content:RemoveChild(content:GetChildByIndex(i))	endendfunction OnMouseEnter(self)    local list = self:GetOwnerControl()	list:SetSel(self)endfunction OnLButtonDbClick(self)    local control = self:GetOwnerControl()	local attr = self:GetAttribute()	control:FireExtEvent("OnSelected", attr.id)endfunction OnRButtonDown(self)    local control = self:GetOwnerControl()	local attr = self:GetAttribute()	control:FireExtEvent("OnPopupItemMenu", attr.id)endfunction MouseWheel(self, distance)	local content = self:GetControlObject("content")	local left,top,right,bottom = content:GetObjPos()	local height = bottom - top	local attr = self:GetAttribute()	local top1 = attr.top	if distance > 0 then		top1 = top1 + 50	elseif distance < 0 then		top1 = top1 - 50	end	local cnt = content:GetChildCount()	if height - (cnt*50 + top1) < 0 then		attr.top = top1	else		attr.top = height - (cnt*50 + top1) + attr.top - 50			end	if attr.top > 0 then attr.top = 0 end	self:SetAdjust()	local vscroll = self:GetControlObject("vscroll")	vscroll:SetScrollPos(-attr.top, true)endfunction OnMouseWheel(self, x, y, distance)	self:GetOwnerControl():MouseWheel(distance)endfunction OnMouseWheel_Item(self, x, y, distance)	self:GetOwnerControl():MouseWheel(distance)endfunction UpdateScroll(self)	local content = self:GetControlObject("content")	local left,top,right,bottom = content:GetObjPos()	local height = bottom - top	local vscroll = self:GetControlObject("vscroll")	vscroll:SetPageSize(height)	local cnt = content:GetChildCount()	local range = cnt*50 - height	if range < 0 then		vscroll:SetVisible(false)		vscroll:SetChildrenVisible(false)		range = 0	else		vscroll:SetVisible(true)		vscroll:SetChildrenVisible(true)	end	vscroll:SetScrollRange(0, range)	vscroll:SetScrollPos(0, true)endfunction List_OnInitControl(self)	endfunction OnVScroll(self, fun, type, newpos)	local owner = self:GetOwnerControl()	local attr = owner:GetAttribute()	if type == 4 then		attr.top = -newpos		owner:SetAdjust()	endendfunction OnPosChange(self)	local content = self:GetControlObject("content")	local left,top,right,bottom = content:GetObjPos()	local height = bottom - top	local attr = self:GetAttribute()	local cnt = content:GetChildCount()	if height >= cnt*50 then attr.top = 0 self:SetAdjust() end	self:UpdateScroll()endfunction OnScrollBarMouseWheel(self,func,x,y,distance)	self:GetOwnerControl():MouseWheel(distance)end